<h1 mat-dialog-title>{{ isEditMode ? 'Editar Lançamento' : 'Novo Lançamento' }}</h1>

<div mat-dialog-content>
  <form [formGroup]="lancamentoForm" class="lancamento-form">
    <mat-form-field>
      <mat-label>Descrição</mat-label>
      <input matInput formControlName="descricao" required>
    </mat-form-field>

    <div class="form-row">
      <mat-form-field>
        <mat-label>Valor</mat-label>
        <input matInput formControlName="valorLancamento" type="number" required>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Tipo de Lançamento</mat-label>
        <mat-select formControlName="tipoLancamento" required>
          <mat-option *ngFor="let tipo of tiposLancamento" [value]="tipo.id">
            {{ tipo.descricao }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="form-row">
      <mat-form-field>
        <mat-label>Data Lançamento</mat-label>
        <input matInput [matDatepicker]="pickerLancamento" formControlName="dataLancamento" required>
        <mat-datepicker-toggle matSuffix [for]="pickerLancamento"></mat-datepicker-toggle>
        <mat-datepicker #pickerLancamento></mat-datepicker>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Data Vencimento</mat-label>
        <input matInput [matDatepicker]="pickerVencimento" formControlName="dataVencimento" required>
        <mat-datepicker-toggle matSuffix [for]="pickerVencimento"></mat-datepicker-toggle>
        <mat-datepicker #pickerVencimento></mat-datepicker>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Data Baixa</mat-label>
        <input matInput [matDatepicker]="pickerBaixa" formControlName="dataBaixa" required>
        <mat-datepicker-toggle matSuffix [for]="pickerBaixa"></mat-datepicker-toggle>
        <mat-datepicker #pickerBaixa></mat-datepicker>
      </mat-form-field>
    </div>

    <mat-form-field>
      <mat-label>Situação</mat-label>
      <mat-select formControlName="situacao" required>
        <mat-option *ngFor="let s of situacoes" [value]="s.id">
          {{ s.descricao }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Usuário</mat-label>
      <mat-select formControlName="id" required>
        <mat-option *ngFor="let usuario of usuarios" [value]="usuario.id">
          {{ usuario.nome }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Categoria</mat-label>
      <mat-select formControlName="idCategoria" required>
        <mat-option *ngFor="let cat of categorias" [value]="cat.idCategoria">
          {{ cat.descricaoCategoria }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Conta Bancária</mat-label>
      <mat-select formControlName="idConta" required>
        <mat-option *ngFor="let conta of contas" [value]="conta.idConta">
          {{ conta.descricaoConta }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </form>
</div>

<div mat-dialog-actions align="end">
  <button mat-button (click)="onCancel()">Cancelar</button>
  <button mat-raised-button color="primary" [disabled]="lancamentoForm.invalid" (click)="onSave()">
    {{ isEditMode ? 'Atualizar' : 'Salvar' }}
  </button>
</div>
