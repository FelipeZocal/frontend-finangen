<div class="lancamento-dialog">
  <div class="dialog-title">
    <h1>{{ isEditMode ? 'Editar Lançamento' : 'Novo Lançamento' }}</h1>
  </div>
  
  <div class="dialog-content">
    <form [formGroup]="lancamentoForm" class="lancamento-form">
      <!-- Descrição -->
      <div class="form-field">
        <mat-form-field appearance="fill">
          <mat-label>Descrição</mat-label>
          <input matInput formControlName="descricao" placeholder="Ex: Pagamento de conta" required>
        </mat-form-field>
      </div>

      <!-- Valor e Tipo de Lançamento -->
      <div class="form-row">
        <div class="form-field">
          <mat-form-field appearance="fill">
            <mat-label>Valor</mat-label>
            <input matInput formControlName="valorLancamento" type="number" placeholder="0,00" step="0.01" required>
          </mat-form-field>
        </div>

        <div class="form-field">
          <mat-form-field appearance="fill">
            <mat-label>Tipo de Lançamento</mat-label>
            <mat-select formControlName="tipoLancamento" required>
              <mat-option *ngFor="let tipo of tiposLancamento" [value]="tipo.id">
                {{ tipo.descricao }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>

      <!-- Datas -->
      <div class="form-row three-columns">
        <div class="form-field">
          <mat-form-field appearance="fill">
            <mat-label>Data Lançamento</mat-label>
            <input matInput [matDatepicker]="pickerLancamento" formControlName="dataLancamento" required>
            <mat-datepicker-toggle matSuffix [for]="pickerLancamento"></mat-datepicker-toggle>
            <mat-datepicker #pickerLancamento></mat-datepicker>
          </mat-form-field>
        </div>

        <div class="form-field">
          <mat-form-field appearance="fill">
            <mat-label>Data Vencimento</mat-label>
            <input matInput [matDatepicker]="pickerVencimento" formControlName="dataVencimento" required>
            <mat-datepicker-toggle matSuffix [for]="pickerVencimento"></mat-datepicker-toggle>
            <mat-datepicker #pickerVencimento></mat-datepicker>
          </mat-form-field>
        </div>

        <div class="form-field">
          <mat-form-field appearance="fill">
            <mat-label>Data Baixa</mat-label>
            <input matInput [matDatepicker]="pickerBaixa" formControlName="dataBaixa" required>
            <mat-datepicker-toggle matSuffix [for]="pickerBaixa"></mat-datepicker-toggle>
            <mat-datepicker #pickerBaixa></mat-datepicker>
          </mat-form-field>
        </div>
      </div>

      <!-- Situação -->
      <div class="form-field">
        <mat-form-field appearance="fill">
          <mat-label>Situação</mat-label>
          <mat-select formControlName="situacao" required>
            <mat-option *ngFor="let s of situacoes" [value]="s.id">
              {{ s.descricao }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <!-- Usuário -->
      <div class="form-field">
        <mat-form-field appearance="fill">
          <mat-label>Usuário</mat-label>
          <mat-select formControlName="id" required>
            <mat-option *ngFor="let usuario of usuarios" [value]="usuario.id">
              {{ usuario.nome }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <!-- Categoria -->
      <div class="form-field">
        <mat-form-field appearance="fill">
          <mat-label>Categoria</mat-label>
          <mat-select formControlName="idCategoria" required>
            <mat-option *ngFor="let cat of categorias" [value]="cat.idCategoria">
              {{ cat.descricaoCategoria }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <!-- Conta Bancária -->
      <div class="form-field">
        <mat-form-field appearance="fill">
          <mat-label>Conta Bancária</mat-label>
          <mat-select formControlName="idConta" required>
            <mat-option *ngFor="let conta of contas" [value]="conta.idConta">
              {{ conta.descricaoConta }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </form>
  </div>
  
  <div class="dialog-actions">
    <button mat-button class="btn-cancel" (click)="onCancel()">Cancelar</button>
    <button mat-raised-button class="btn-save" [disabled]="lancamentoForm.invalid" (click)="onSave()">
      {{ isEditMode ? 'Atualizar' : 'Salvar' }}
    </button>
  </div>
</div>